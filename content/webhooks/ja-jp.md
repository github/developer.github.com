---
タイトル：あなたのサーバーを構成します
レイアウト：ウェブフ​​ック
---

＃サーバーの構成！

{:toc}

今私達のウェブフックがメッセージを配信する準備ができていることを、私たちは基本的なシナト​​ラサーバーを設定します
着信ペイロードを処理します。

// localhostを：4567 / payload`我々は特に `でhttp当社のウェブフックのURLを設定することを思い出してください。
我々はローカルで開発しているので、私たちは地元の開発環境を公開する必要があります
インターネットに、GitHubには、メッセージを送信することができ、私たちのローカルサーバーができるように、
それらを処理。

注：このプロジェクトのための完全なソースコードをダウンロードすることができます
[from the platform-samples repo][platform samples].

## ngrok使い方

まず、インターネットに私達のローカルホストを公開するためのプログラムをインストールします。我々は、使用します
これを行うにはngrok。 [ngrok is a free download]（https://ngrok.com/download）利用可能
すべての主要なオペレーティングシステムのため。

あなたはそれと終わったら、あなたは `./ngrokのhttpを実行して、ローカルホストを公開することができ4567`
コマンドラインで。あなたはこのような行が表示されます。

`` `コマンドライン
$フォワーディングhttp://7e9ea9dc.ngrok.io - > 127.0.0.1:4567
```

ファンキー `* .ngrok.io`のURLことをコピーします！私たちは今、ペイロードに* *戻って行くつもりです
URLは、そのフィールドに、このサーバーを貼り付けます。 // http://7e9ea9dc.ngrok.io/payload / payload`：それは `HTTPのようになります。

これにより、我々は `/ payload`パスで私たちのローカルホストを公開するために自分自身を設定しました
インターネットへ。

##サーバを書きます

今楽しい部分です！当社は、当社のサーバーは `/ payload`で、POST`リクエスト`を聞きたいです
それだから、我々はGitHubのに言ったところ、当社のウェブフックのURLがありました。 ngrokが公開しているので、
私たちの地域の環境、私たちはどこかにオンラインで実サーバを設定する必要はありませんし、
喜んで局所的に私たちのコードをテストすることができます。

情報で何かを少しシナトラアプリを設定してみましょう。私たちの最初の
セットアップは、次のようになります。

`` `ルビー
「シナトラ」を必要とします
「JSON」を必要とします

ポスト '/ペイロード'を実行
プッシュ= JSON.parse（request.body.read）
"私はいくつかのJSONを得た：＃"置きます {push.inspect}
終わり
```

（あなたはシナトラがどのように動作するかをよく知らないなら、私たちはお勧めします。） [reading the Sinatra guide] [Sinatra]

このサーバを起動します。

我々はIssues` `を扱うイベントをリッスンするために、当社のウェブフックを設定しているので、先に行きます
そしてあなたがテストしているリポジトリに新しい問題を作成します。あなたが作成した後
それは、あなたの端末に切り替えます。あなたの出力にこのように表示されます。

`` `コマンドライン
$〜/開発/プラットフォーム - サンプル/フック/ルビー/設定 - あなたのサーバー$ルビーserver.rb
> ==シナトラ/ 4567シンからバックアップと開発のための4567のステージを取りました
> >>シンWebサーバ（V1.5.1コードネームストレートレイザー）
1024年に設定> >>最大接続数
> >> localhostで聞く：4567、CTRL + Cを停止します
>私はいくつかのJSONを得た：{ "アクション" => "開かれた"、 "問題" => { "URL" => "を...
```

成功！あなたは成功したウェブフックに耳を傾けるようにサーバーを設定しました。きみの
サーバーがこの情報をあなたがフィット感を参照してくださいどのような方法を処理することができます。たとえば、あなたの場合
"本当の" Webアプリケーションを設定した、あなたはJSONのいくつかをログに記録する場合があります
データベースに出力します。

楽しさと利益のためのウェブフックでの作業の詳細については、頭の上
オーバー（/ウェブフック/テスト）ガイド。 [Testing Webhooks]

[platform samples] ：https://github.com/github/platform-samples/tree/master/hooks/ruby/configuring-your-server
[Sinatra] ：http://www.sinatrarb.com/
